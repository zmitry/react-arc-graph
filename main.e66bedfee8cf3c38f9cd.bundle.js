(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{226:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return nodesFromEdges});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),nodesFromEdges=function(d){return tslib__WEBPACK_IMPORTED_MODULE_0__.d(new Set(d.flatMap(function(el){return[el.from,el.to]}))).sort().map(function(id){return{id:id}})}},228:function(module,exports,__webpack_require__){__webpack_require__(229),__webpack_require__(333),module.exports=__webpack_require__(334)},334:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(32),__webpack_require__(27),__webpack_require__(26),__webpack_require__(33),__webpack_require__(34);var _storybook_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(97),req=__webpack_require__(497);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_5__.configure)(function loadStories(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(168)(module))},45:function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(12),src=__webpack_require__(227),rainbow=__webpack_require__(501),lodash=__webpack_require__(98),react=__webpack_require__(1),react_default=__webpack_require__.n(react);var defaultPaddingFinderOptions={defaultPad:1,padStep:1,allowOneSepIntersections:!1};var d3_shape_src=__webpack_require__(137),line=Object(d3_shape_src.b)().curve(d3_shape_src.a);var NodeLinkDefaultProps={angleFactor:6,angleBasic:15,padScale:5,maxPad:6,padLimitDiffFactor:3,strokeWidth:2};function NodeLink(_a){var d,edge=_a.edge,scaleY=_a.scaleY,angleBasic=_a.angleBasic,angleFactor=_a.angleFactor,padScale=_a.padScale,maxPad=_a.maxPad,padLimitDiffFactor=_a.padLimitDiffFactor,diff=Math.abs(edge.toIndex-edge.fromIndex),padAvailable=Math.min(edge.pad,maxPad),padDiff=edge.pad-padAvailable,pathObj={x:scaleY(0),y:scaleY(Math.min(edge.fromIndex,edge.toIndex)),h:scaleY(Math.max(edge.fromIndex,edge.toIndex)),w:padAvailable*padScale+padDiff*padLimitDiffFactor,d:edge.side,z:angleBasic+angleFactor/edge.pad};return d=1!==diff?function linePath(_a){var x=_a.x,y=_a.y,h=_a.h,w=_a.w,_b=_a.z,z=void 0===_b?w:_b,_c=_a.d,x2=w*(void 0===_c?1:_c)+x,x3=x2,y2=y+z,y3=Math.max(h-z,y2);return line([[x,y],[x2,y+z],[x3,y3],[x,h]])}(pathObj):function linePathSimple(_a){var x=_a.x,y=_a.y,h=_a.h;return line([[x,y],[x+1e-6,h]])}(pathObj),react_default.a.createElement("path",{"data-id":edge.index,key:edge.index,fill:"none",strokeWidth:1,pathLength:100,strokeDasharray:100,d:d,stroke:"url(#linear"+edge.index+")"})}NodeLink.defaultProps=NodeLinkDefaultProps,__webpack_require__.d(__webpack_exports__,"a",function(){return ListViewGraph_ListViewGraph});var defaultProps={width:1200,height:1200,padding:20,scale:20,paddingFinderOptions:defaultPaddingFinderOptions,nodeLinkProps:NodeLinkDefaultProps},ListViewGraph_ListViewGraph=function(_super){function ListViewGraph(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.b(ListViewGraph,_super),ListViewGraph.prototype.render=function(){var _a=this.props,_b=_a.edges,data=void 0===_b?[]:_b,width=_a.width,height=_a.height,padding=_a.padding,scale=_a.scale,paddingFinderOptions=_a.paddingFinderOptions,nodeLinkProps=_a.nodeLinkProps,nodes=tslib_es6.d(new Set(data.flatMap(function(el){return[el.from,el.to]}))).sort(function(a,b){return a-b}),edges=data.map(function(el,index){var oFromIndex=nodes.indexOf(el.from),oToIndex=nodes.indexOf(el.to),_a=tslib_es6.c([oFromIndex,oToIndex].sort(function(a,b){return a-b}),2),fromIndex=_a[0],toIndex=_a[1];return tslib_es6.a({},el,{index:index,fromIndex:fromIndex,toIndex:toIndex,direction:Object(lodash.clamp)(oFromIndex-oToIndex,-1,1),pad:Math.abs(toIndex-fromIndex)-1,side:1})});(function getEdgeSides(edges){var kvMap=edges.reduce(function(acc,el){if(1===Math.abs(el.toIndex-el.fromIndex))return acc;for(var i=el.fromIndex;i<el.toIndex;i++){var v=acc.get(i)||[];acc.set(i,tslib_es6.d(v,[el]))}return acc},new Map);return tslib_es6.d(kvMap.entries()).sort(function(a,b){return a[0]-b[0]}).reduce(function(acc,_a){var e_1,_b,_c=tslib_es6.c(_a,2),lineEdges=(_c[0],_c[1]),leftEdges=lineEdges.filter(function(el){return-1===acc.get(el.index)}),diff=Math.ceil((lineEdges.length-leftEdges.length)/2);try{for(var lineEdges_1=tslib_es6.e(lineEdges),lineEdges_1_1=lineEdges_1.next();!lineEdges_1_1.done;lineEdges_1_1=lineEdges_1.next()){var edge=lineEdges_1_1.value,index=edge.index;if(void 0===acc.get(index)){var side=edge.index%2==1&&diff>0?-1:1;acc.set(index,side),-1===side&&diff--}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{lineEdges_1_1&&!lineEdges_1_1.done&&(_b=lineEdges_1.return)&&_b.call(lineEdges_1)}finally{if(e_1)throw e_1.error}}return acc},new Map)})(edges).forEach(function(el,k){edges[k].side=el}),function getEdgePaddings(edges,options){void 0===options&&(options=defaultPaddingFinderOptions);var _a=Object.assign({},defaultPaddingFinderOptions,options),defaultPad=_a.defaultPad,padStep=_a.padStep,allowOneSepIntersections=_a.allowOneSepIntersections,kvMap=new Map,filtered=edges.filter(function(el){return 0!==el.pad}).sort(function(a,b){return a.pad-b.pad}),result=new Map;return filtered.forEach(function(el){var _a=tslib_es6.c([el.fromIndex,el.toIndex].sort(function(a,b){return a-b}),2),a=_a[0],b=_a[1];allowOneSepIntersections&&(a+=1);var ranges=Object(lodash.range)(a,b).map(function(i){var k=i+":"+el.side;return kvMap.get(k)||defaultPad}),nextPad=(ranges.length>0?Math.max.apply(Math,tslib_es6.d(ranges)):defaultPad)+padStep,startIndex=el.fromIndex,endIndex=el.toIndex;allowOneSepIntersections&&(startIndex+=1,endIndex-=1);for(var i=startIndex;i<=endIndex;i++){var k=i+":"+el.side;kvMap.set(k,nextPad)}result.set(el.index,nextPad)}),result}(edges,paddingFinderOptions).forEach(function(el,k){edges[k].pad=el});var size=edges.length,intr=Object(src.a)().domain([0,size]).range([padding,scale*size+padding]),colorInterpolate=function(n){return n%2==0?Object(rainbow.b)(n/size):Object(rainbow.a)(n/size)};return react_default.a.createElement("svg",{width:width,height:height,viewBox:"0 0 100 400"},react_default.a.createElement("defs",null,react_default.a.createElement("marker",{id:"arrow",viewBox:"-5 -5 15 15",refX:"3",refY:"4",markerUnits:"strokeWidth",markerWidth:"4",markerHeight:"4",orient:"auto"},react_default.a.createElement("path",{d:"M -5 -2 L 10 4 L -5 10",fill:"red",stroke:"red",strokeWidth:"1"})),edges.map(function(edge){return react_default.a.createElement("linearGradient",{key:edge.index,id:"linear"+edge.index,x1:"0",x2:"0",y1:"0",y2:"1"},react_default.a.createElement("stop",{offset:"0%",stopColor:colorInterpolate(edge.fromIndex)}),react_default.a.createElement("stop",{offset:"100%",stopColor:colorInterpolate(edge.toIndex)}))})),edges.map(function(el,i){return react_default.a.createElement(NodeLink,tslib_es6.a({edge:el,key:i,scaleY:intr,interpolateColor:colorInterpolate},nodeLinkProps))}),nodes.map(function(_el,i){var color=colorInterpolate(i);return react_default.a.createElement("g",{key:i},react_default.a.createElement("circle",{cx:padding,fill:color,cy:intr(i),r:3}))}))},ListViewGraph.defaultProps=defaultProps,ListViewGraph}(react_default.a.Component)},497:function(module,exports,__webpack_require__){var map={"./ListViewGraph.stories.js":498};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=497},498:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(83);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(97),_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45),_src_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(226);function Wrapper(_ref){var children=_ref.children;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},children)}Wrapper.displayName="Wrapper";var data=[["1","2"],["1","5"],["2","4"],["3","6"],["3","8"],["5","8"],["6","8"],["7","8"],["9","10"],["9","11"]].map(function(el){return{from:el[0],to:el[1]}});Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("Arg graph",module).add("left sided",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__.a,{edges:data,nodes:Object(_src_utils__WEBPACK_IMPORTED_MODULE_4__.a)(data),buildInterpolators:function buildInterpolators(){return{interpolateY:function interpolateY(){return 10}}}}))}).add("basic auto sided",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__.a,{edges:data,paddingFinderOptions:{defaultPad:2,padStep:2,allowOneSepIntersections:!0}}))}).add("ui variations",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__.a,{edges:data,nodeLinkProps:{angleBasic:20,padScale:3,maxPad:5,padLimitDiffFactor:3}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__.a,{edges:data,nodeLinkProps:{angleFactor:10,angleBasic:10,padScale:8,maxPad:5,padLimitDiffFactor:3}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__.a,{edges:data,paddingFinderOptions:{defaultPad:1,padStep:1,allowOneSepIntersections:!1},nodeLinkProps:{angleFactor:1,angleBasic:2,padScale:3,maxPad:5,padLimitDiffFactor:3}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_src_ListViewGraph__WEBPACK_IMPORTED_MODULE_3__.a,{edges:data,paddingFinderOptions:{defaultPad:2,padStep:1,allowOneSepIntersections:!1},nodeLinkProps:{angleFactor:32,angleBasic:3,padScale:4,maxPad:6,padLimitDiffFactor:3}}))})}.call(this,__webpack_require__(168)(module))}},[[228,1,2]]]);
//# sourceMappingURL=main.e66bedfee8cf3c38f9cd.bundle.js.map